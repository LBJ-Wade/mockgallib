#
# mock_galaxy_library/lib
#

LIBRARY   = libmockgal.a libmockgal.dylib

all: $(LIBRARY)

CPPFLAGS := -O2
LIBS     := -lm -lgsl -lgslcblas -lhdf5

# options
CPPFLAGS += -DDEBUG


# add non standark library path if necessary
DIR_PATH := # e.g. /opt/gsl

CFLAGS   += $(foreach dir, $(DIR_PATH), -I$(dir)/include)
LIBS     += $(foreach dir, $(DIR_PATH), -L$(dir)/lib)

OBJS     := msg.o cosmology.o growth.o
OBJS     += power.o sigma.o mf.o
OBJS     += hod.o nbar.o nbar_fitting.o

libmockgal.a: $(OBJS)
	ar r $@ $(OBJS)

libmockgal.dylib: $(OBJS)
	$(CXX) -dynamiclib $(LIBS) $(OBJS) -o $@

# dependence generated by `make dependence`
cosmology.o: cosmology.cpp cosmology.h const.h
mf.o: mf.cpp mf.h const.h
msg.o: msg.cpp msg.h
power.o: power.cpp power.h msg.h
sigma.o: sigma.cpp const.h sigma.h power.h cosmology.h

.PHONY: clean dependence
clean:
	rm -f $(LIBRARY) $(OBJS)

dependence:
	g++ -MM -MG *.cpp
